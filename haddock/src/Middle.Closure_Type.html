<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Middle.Closure_Type</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-2"></a><span>
</span><a name="line-3"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="Front.Syntax.html"><span class="hs-identifier">Front.Syntax</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Syn</span><span>
</span><a name="line-4"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><a href="RunRun.Type.html"><span class="hs-identifier">RunRun.Type</span></a><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Ty</span><span>
</span><a name="line-5"></a><span>
</span><a name="line-6"></a><span>
</span><a name="line-7"></a><span class="hs-keyword">data</span><span> </span><a name="L"><a href="Middle.Closure_Type.html#L"><span class="hs-identifier">L</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="L"><a href="Middle.Closure_Type.html#L"><span class="hs-identifier">L</span></a></a><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Show</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">)</span><span>
</span><a name="line-8"></a><span class="hs-keyword">data</span><span> </span><a name="Prog"><a href="Middle.Closure_Type.html#Prog"><span class="hs-identifier">Prog</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Prog"><a href="Middle.Closure_Type.html#Prog"><span class="hs-identifier">Prog</span></a></a><span> </span><a href="Middle.Closure_Type.html#C"><span class="hs-identifier hs-type">C</span></a><span> </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span class="hs-identifier hs-type">Show</span><span class="hs-special">)</span><span>
</span><a name="line-9"></a><span class="hs-keyword">data</span><span> </span><a name="C"><a href="Middle.Closure_Type.html#C"><span class="hs-identifier">C</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-10"></a><span>    </span><a name="Unit"><a href="Middle.Closure_Type.html#Unit"><span class="hs-identifier">Unit</span></a></a><span>
</span><a name="line-11"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Int"><a href="Middle.Closure_Type.html#Int"><span class="hs-identifier">Int</span></a></a><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">Int</span><span>
</span><a name="line-12"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Float"><a href="Middle.Closure_Type.html#Float"><span class="hs-identifier">Float</span></a></a><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">Float</span><span>
</span><a name="line-13"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Unary_op"><a href="Middle.Closure_Type.html#Unary_op"><span class="hs-identifier">Unary_op</span></a></a><span> </span><span class="hs-glyph">!</span><a href="Front.Syntax.html#Unary_operator"><span class="hs-identifier hs-type">Syn.Unary_operator</span></a><span> </span><span class="hs-glyph">!</span><a href="RunRun.Type.html#Type"><span class="hs-identifier hs-type">Ty.Type</span></a><span> </span><span class="hs-glyph">!</span><a href="RunRun.Type.html#Type"><span class="hs-identifier hs-type">Ty.Type</span></a><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-14"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Arith1"><a href="Middle.Closure_Type.html#Arith1"><span class="hs-identifier">Arith1</span></a></a><span> </span><span class="hs-glyph">!</span><a href="Front.Syntax.html#Arith_unary"><span class="hs-identifier hs-type">Syn.Arith_unary</span></a><span>  </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-15"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Arith2"><a href="Middle.Closure_Type.html#Arith2"><span class="hs-identifier">Arith2</span></a></a><span> </span><span class="hs-glyph">!</span><a href="Front.Syntax.html#Arith_binary"><span class="hs-identifier hs-type">Syn.Arith_binary</span></a><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-16"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Float1"><a href="Middle.Closure_Type.html#Float1"><span class="hs-identifier">Float1</span></a></a><span> </span><span class="hs-glyph">!</span><a href="Front.Syntax.html#Float_unary"><span class="hs-identifier hs-type">Syn.Float_unary</span></a><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-17"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Float2"><a href="Middle.Closure_Type.html#Float2"><span class="hs-identifier">Float2</span></a></a><span> </span><span class="hs-glyph">!</span><a href="Front.Syntax.html#Float_binary"><span class="hs-identifier hs-type">Syn.Float_binary</span></a><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-18"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Cmp"><a href="Middle.Closure_Type.html#Cmp"><span class="hs-identifier">Cmp</span></a></a><span> </span><span class="hs-glyph">!</span><a href="Front.Syntax.html#Compare"><span class="hs-identifier hs-type">Syn.Compare</span></a><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-19"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="If"><a href="Middle.Closure_Type.html#If"><span class="hs-identifier">If</span></a></a><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">!</span><a href="Middle.Closure_Type.html#C"><span class="hs-identifier hs-type">C</span></a><span> </span><span class="hs-glyph">!</span><a href="Middle.Closure_Type.html#C"><span class="hs-identifier hs-type">C</span></a><span>
</span><a name="line-20"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="IfCmp"><a href="Middle.Closure_Type.html#IfCmp"><span class="hs-identifier">IfCmp</span></a></a><span> </span><span class="hs-glyph">!</span><a href="Front.Syntax.html#Compare"><span class="hs-identifier hs-type">Syn.Compare</span></a><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">!</span><a href="Middle.Closure_Type.html#C"><span class="hs-identifier hs-type">C</span></a><span> </span><span class="hs-glyph">!</span><a href="Middle.Closure_Type.html#C"><span class="hs-identifier hs-type">C</span></a><span>
</span><a name="line-21"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="FIfCmp"><a href="Middle.Closure_Type.html#FIfCmp"><span class="hs-identifier">FIfCmp</span></a></a><span> </span><span class="hs-glyph">!</span><a href="Front.Syntax.html#Compare"><span class="hs-identifier hs-type">Syn.Compare</span></a><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">!</span><a href="Middle.Closure_Type.html#C"><span class="hs-identifier hs-type">C</span></a><span> </span><span class="hs-glyph">!</span><a href="Middle.Closure_Type.html#C"><span class="hs-identifier hs-type">C</span></a><span>
</span><a name="line-22"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Let"><a href="Middle.Closure_Type.html#Let"><span class="hs-identifier">Let</span></a></a><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="hs-identifier hs-type">String</span><span class="hs-special">,</span><span> </span><a href="RunRun.Type.html#Type"><span class="hs-identifier hs-type">Ty.Type</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">!</span><a href="Middle.Closure_Type.html#C"><span class="hs-identifier hs-type">C</span></a><span> </span><span class="hs-glyph">!</span><a href="Middle.Closure_Type.html#C"><span class="hs-identifier hs-type">C</span></a><span>
</span><a name="line-23"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Var"><a href="Middle.Closure_Type.html#Var"><span class="hs-identifier">Var</span></a></a><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-24"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Out"><a href="Middle.Closure_Type.html#Out"><span class="hs-identifier">Out</span></a></a><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-25"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="In"><a href="Middle.Closure_Type.html#In"><span class="hs-identifier">In</span></a></a><span> </span><span class="hs-glyph">!</span><a href="RunRun.Type.html#Type"><span class="hs-identifier hs-type">Ty.Type</span></a><span>
</span><a name="line-26"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Tuple"><a href="Middle.Closure_Type.html#Tuple"><span class="hs-identifier">Tuple</span></a></a><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span>
</span><a name="line-27"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="LetTuple"><a href="Middle.Closure_Type.html#LetTuple"><span class="hs-identifier">LetTuple</span></a></a><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-identifier hs-type">String</span><span class="hs-special">,</span><span> </span><a href="RunRun.Type.html#Type"><span class="hs-identifier hs-type">Ty.Type</span></a><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">!</span><a href="Middle.Closure_Type.html#C"><span class="hs-identifier hs-type">C</span></a><span>
</span><a name="line-28"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Array"><a href="Middle.Closure_Type.html#Array"><span class="hs-identifier">Array</span></a></a><span> </span><span class="hs-glyph">!</span><a href="RunRun.Type.html#Type"><span class="hs-identifier hs-type">Ty.Type</span></a><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-29"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Get"><a href="Middle.Closure_Type.html#Get"><span class="hs-identifier">Get</span></a></a><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-30"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Put"><a href="Middle.Closure_Type.html#Put"><span class="hs-identifier">Put</span></a></a><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-31"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="MakeCls"><a href="Middle.Closure_Type.html#MakeCls"><span class="hs-identifier">MakeCls</span></a></a><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="hs-identifier hs-type">String</span><span class="hs-special">,</span><span> </span><a href="RunRun.Type.html#Type"><span class="hs-identifier hs-type">Ty.Type</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">!</span><a href="Middle.Closure_Type.html#Closure"><span class="hs-identifier hs-type">Closure</span></a><span> </span><span class="hs-glyph">!</span><a href="Middle.Closure_Type.html#C"><span class="hs-identifier hs-type">C</span></a><span>
</span><a name="line-32"></a><span>  </span><span class="hs-comment">-- | AppCls !String ![String]      ----------- &#12392;&#12426;&#12354;&#12360;&#12378;&#12394;&#12375;&#12391;</span><span>
</span><a name="line-33"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="AppDir"><a href="Middle.Closure_Type.html#AppDir"><span class="hs-identifier">AppDir</span></a></a><span> </span><span class="hs-glyph">!</span><a href="Middle.Closure_Type.html#L"><span class="hs-identifier hs-type">L</span></a><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span>
</span><a name="line-34"></a><span>  </span><span class="hs-glyph">|</span><span> </span><a name="Malloc"><a href="Middle.Closure_Type.html#Malloc"><span class="hs-identifier">Malloc</span></a></a><span> </span><span class="hs-glyph">!</span><a href="RunRun.Type.html#Type"><span class="hs-identifier hs-type">Ty.Type</span></a><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">Int</span><span> </span><span class="hs-glyph">!</span><a href="Middle.Closure_Type.html#MallocInit"><span class="hs-identifier hs-type">MallocInit</span></a><span>
</span><a name="line-35"></a><span>  </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span class="hs-identifier hs-type">Show</span><span class="hs-special">)</span><span>
</span><a name="line-36"></a><span>
</span><a name="line-37"></a><span>
</span><a name="line-38"></a><span class="hs-comment">-- Show Exp</span><span>
</span><a name="line-39"></a><span class="hs-comment">-- instance Show C where</span><span>
</span><a name="line-40"></a><span class="hs-comment">--     show Unit = &quot;Unit&quot;</span><span>
</span><a name="line-41"></a><span class="hs-comment">--     show (Int n) = show n ++ &quot;\n&quot;</span><span>
</span><a name="line-42"></a><span class="hs-comment">--     show (Float f) = show f ++ &quot;\n&quot;</span><span>
</span><a name="line-43"></a><span class="hs-comment">--     show (Unary_op op _ _ x) = show op ++ &quot; &quot; ++ show x</span><span>
</span><a name="line-44"></a><span class="hs-comment">--     show e = &quot;&quot;</span><span>
</span><a name="line-45"></a><span>
</span><a name="line-46"></a><span>
</span><a name="line-47"></a><span class="hs-keyword">data</span><span> </span><a name="Fundef"><a href="Middle.Closure_Type.html#Fundef"><span class="hs-identifier">Fundef</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Fundef"><a href="Middle.Closure_Type.html#Fundef"><span class="hs-identifier">Fundef</span></a></a><span> </span><span class="hs-special">{</span><span>
</span><a name="line-48"></a><span>        </span><a name="name"><a href="Middle.Closure_Type.html#name"><span class="hs-identifier">name</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><a href="Middle.Closure_Type.html#L"><span class="hs-identifier hs-type">L</span></a><span class="hs-special">,</span><span> </span><a href="RunRun.Type.html#Type"><span class="hs-identifier hs-type">Ty.Type</span></a><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-49"></a><span>        </span><a name="args"><a href="Middle.Closure_Type.html#args"><span class="hs-identifier">args</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-identifier hs-type">String</span><span class="hs-special">,</span><span> </span><a href="RunRun.Type.html#Type"><span class="hs-identifier hs-type">Ty.Type</span></a><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><a name="line-50"></a><span>        </span><a name="formal_fv"><a href="Middle.Closure_Type.html#formal_fv"><span class="hs-identifier">formal_fv</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-identifier hs-type">String</span><span class="hs-special">,</span><span> </span><a href="RunRun.Type.html#Type"><span class="hs-identifier hs-type">Ty.Type</span></a><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><a name="line-51"></a><span>        </span><a name="body"><a href="Middle.Closure_Type.html#body"><span class="hs-identifier">body</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Middle.Closure_Type.html#C"><span class="hs-identifier hs-type">C</span></a><span>
</span><a name="line-52"></a><span>        </span><span class="hs-special">}</span><span>
</span><a name="line-53"></a><span>        </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span class="hs-identifier hs-type">Show</span><span class="hs-special">)</span><span>
</span><a name="line-54"></a><span>
</span><a name="line-55"></a><span>
</span><a name="line-56"></a><span>
</span><a name="line-57"></a><span>
</span><a name="line-58"></a><span>
</span><a name="line-59"></a><span class="hs-keyword">data</span><span> </span><a name="Closure"><a href="Middle.Closure_Type.html#Closure"><span class="hs-identifier">Closure</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Cls"><a href="Middle.Closure_Type.html#Cls"><span class="hs-identifier">Cls</span></a></a><span> </span><span class="hs-special">{</span><span> </span><a name="entry"><a href="Middle.Closure_Type.html#entry"><span class="hs-identifier">entry</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="Middle.Closure_Type.html#L"><span class="hs-identifier hs-type">L</span></a><span class="hs-special">,</span><span> </span><a name="actual_fv"><a href="Middle.Closure_Type.html#actual_fv"><span class="hs-identifier">actual_fv</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span> </span><span class="hs-special">}</span><span>
</span><a name="line-60"></a><span>        </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Show</span><span class="hs-special">)</span><span>
</span><a name="line-61"></a><span>
</span><a name="line-62"></a><span class="hs-keyword">data</span><span> </span><a name="MallocInit"><a href="Middle.Closure_Type.html#MallocInit"><span class="hs-identifier">MallocInit</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="A"><a href="Middle.Closure_Type.html#A"><span class="hs-identifier">A</span></a></a><span> </span><span class="hs-glyph">!</span><span class="hs-identifier hs-type">String</span><span>
</span><a name="line-63"></a><span>                </span><span class="hs-glyph">|</span><span> </span><a name="T"><a href="Middle.Closure_Type.html#T"><span class="hs-identifier">T</span></a></a><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span>
</span><a name="line-64"></a><span>    </span><span class="hs-keyword">deriving</span><span class="hs-special">(</span><span class="hs-identifier hs-type">Show</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">)</span><span>
</span><a name="line-65"></a></pre></body></html>